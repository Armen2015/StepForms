<div class="row">
  <div class="col-sm-6 col-sm-offset-3 form-box">
    <form *ngIf = 'currentStep == 1' class="registration-form" [formGroup]="step1"  novalidate>
      <div class="form-top">
          <div class="form-top-left">
              <h3>Step 1 / 3</h3>
              <p>Tell us who you are:</p>
          </div>
          <div class="form-top-right">
              <i class="fa fa-user"></i>
          </div>
      </div>
      <div class="form-bottom">
        <div class="form-group">
            <label class="sr-only" for="form-first-name">First name</label>
            <input class="form-control" 
                   class="form-first-name form-control"
                   [ngClass]="setClass('firstName')" 
                   formControlName="firstName"
                   placeholder="First name..." 
                   mask="SSSSSSSSSSSS"
            >
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-last-name">Last name</label>
            <input class="form-control" 
                   class="form-last-name form-control" 
                   [ngClass]="setClass('lastName')" 
                   formControlName="lastName"
                   placeholder="Last name..." 
                   mask="SSSSSSSSSSSS"
            >
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-country">Country</label>
            <select class = "selectpicker form-control" 
                    formControlName="country"
                    [ngClass]="setClass('country')"
                    (change)="shippingDataChange('country')"
            >
              <option [ngValue]="null" hidden>Choose your country</option>
              <option *ngFor="let option of options" [ngValue]="option">
                {{option.Country}}
              </option>
            </select>
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-city">City</label>
            <input class="form-control" 
                   class="form-city form-control" 
                   [ngClass]="setClass('city')"
                   formControlName="city"
                   placeholder="City..." 
                   mask="SSSSSSSSSSSS"
                   (keyup)="shippingDataChange('city')"
            >
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-address">Address</label>
            <input class="form-control" 
                   class="form-address form-control" 
                   [ngClass]="setClass('address')"
                   formControlName="address"
                   placeholder="Address..." 
                   (keyup)="shippingDataChange('address')"
            >
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-address2">Address2</label>
            <input class="form-control" 
                   class="form-address2 form-control" 
                   formControlName="address2"
                   placeholder="Address2..." 
                   (keyup)="shippingDataChange('address2')"
            >
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-postalCode">Postal Code</label>
            <input class="form-control" 
                   class="form-postal-code form-control" 
                   [ngClass]="setClass('postalCode')"
                   formControlName="postalCode"
                   placeholder="Postal Code..."
                   (keyup)="shippingDataChange('postalCode')"
            >
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-legal">Legal</label>
            <select class = "selectpicker form-control" 
                    formControlName="legal"
                    [ngClass]="setClass('legal')"
                    (change)="shippingDataChange('legal')"
            
            >
              <option [ngValue]="null" hidden>Legal</option>
              <option *ngFor="let option of options.legalOptions" [ngValue]="option">
                {{option.label}}
              </option>
            </select>
        </div>
        <div *ngIf = 'isLegalCompany' class="form-group">
            <label class="sr-only" for="form-companyName">Company name</label>
            <input class="form-control" 
                   class="form-company-name form-control" 
                   [ngClass]="setClass('companyName')"
                   formControlName="companyName"
                   placeholder="Company Name..." 
            >
        </div>
        <!-- Shipping details -->
        <div class="form-group">
            <input type='checkbox' 
                   formControlName="isDataChecked" 
                   (click)="emitCheckboxClick()"
            >
            <label (click) = "emitCheckboxClick()">Use filled data for shipping</label>
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-country">Shipping country</label>
            <select class = "selectpicker form-control" 
                    formControlName="shipCountry"
                    [ngClass]="setClass('shipCountry')"
                    (change)="shippingDataChange('shipCountry')"
            >
              <option [ngValue]="null" hidden>Choose shipping country</option>
              <option *ngFor="let option of options" [ngValue]="option">
                {{option.Country}}
              </option>
            </select>
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-city">Shipping city</label>
            <input class="form-control" 
                   class="form-city form-control" 
                   [ngClass]="setClass('shipCity')"
                   formControlName="shipCity"
                   placeholder="Shipping city..." 
                   mask="SSSSSSSSSSSS"
            >
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-address">Shipping address</label>
            <input class="form-control" 
                   class="form-address form-control" 
                   [ngClass]="setClass('shipAddress')"
                   formControlName="shipAddress"
                   placeholder="Shipping address..." 
            >
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-address2">Shipping address2</label>
            <input class="form-control" 
                   class="form-address2 form-control" 
                   [ngClass]="{ 'disabled': isDataChecked }"
                   formControlName="shipAddress2"
                   placeholder="Shiping address2..." 
            >
        </div>
        <div class="form-group">
            <label class="sr-only" for="form-postalCode">Shiping Postal Code</label>
            <input class="form-control" 
                   class="form-postal-code form-control" 
                   [ngClass]="setClass('shipPostalCode')"
                   formControlName="shipPostalCode"
                   placeholder="Shipping Postal Code..."
                   
            >
        </div>
        <button type="submit" class="btn btn-next" (click)="nextBtn()">Next</button>
      </div>
    </form>

    <!-- Second step -->
    <form *ngIf = 'currentStep == 2' class="registration-form" [formGroup]="step2"  novalidate>
        <div class="form-top">
            <div class="form-top-left">
                <h3>Step 2 / 3</h3>
                <p>Choose a package:</p>
            </div>
            <div class="form-top-right">
                <i class="fa fa-window-restore"></i>
            </div>
        </div>
        <div class="form-bottom">
            <div class="form-group">
                <label class="sr-only" for="form-userName">UserName</label>
                <input class="form-control" 
                   class="form-user-name form-control"
                   [ngClass]="setClass('userName')" 
                   formControlName="userName"
                   placeholder="UserName..." 
                   (keyup)="checkUserName(step2.get('userName'))"
                >
                <span *ngIf = "userNameValid" class = 'user_alert'>Username already exists!</span>
            </div>
            <div class="form-group">
                <label class="sr-only" for="form-password">Password</label>
                <input class="form-control" type="password"
                   class="form-password form-control"
                   [ngClass]="setClass('password')" 
                   formControlName="password"
                   placeholder="Password..." 
                >
                <span *ngIf = "step2.get('password').touched && step2.get('password').value.length < 8 && !step2.get('password').valid" 
                       class = 'user_alert'>Password must be at least 8 characters long</span>
            </div>
            <div class="form-group">
                <input type="radio" name="package" 
                       value = 'Standard Package'
                       formControlName="package" 
                       [ngClass]="setClass('package')"
                       [(ngModel)]='package'
                       (click) = "packageRadioBtnClick(1)"

                > 
                <span (click) = "packageRadioBtnClick(1)">Standard Package</span><br>
                <div *ngIf = "step2.get('package').value == 'Standard Package'">
                    <div class="form-group">
                        <label class="sr-only" for="form-userName">Facebook link</label>
                        <input class="form-control" 
                            class="form-user-facebook form-control"
                            [ngClass]="setClass('facebook')" 
                            formControlName="facebook"
                            placeholder="Facebook link..." 
                        >
                    </div>
                    <div class="form-group">
                        <label class="sr-only" for="form-userName">Twitter link</label>
                        <input class="form-control" 
                            class="form-user-twitter form-control"
                            [ngClass]="setClass('twitter')" 
                            formControlName="twitter"
                            placeholder="Twitter link..." 
                        >
                    </div>
                </div>
                <input type="radio" name="package"
                       value = 'Premium Package'  
                       formControlName="package" 
                       [ngClass]="setClass('package')"
                       [(ngModel)]='package'    
                       (click) = "packageRadioBtnClick(2)"

                > 
                <span (click) = "packageRadioBtnClick(2)">Premium Package</span>
                <div *ngIf = "step2.get('package').value == 'Premium Package'">
                    <div class="form-group">
                        <label class="sr-only" for="form-country">How did You hear about this?</label>
                        <select class = "selectpicker form-control" 
                                formControlName="infoSource"
                                [ngClass]="setClass('infoSource')"
                                (change)="infoSourceDataChange()"
                                
                        >
                          <option [ngValue]="null" hidden>Choose your source</option>
                          <option *ngFor="let option of infoSources" [ngValue]="option">
                            {{ option }}
                          </option>
                        </select>
                    </div>
                    <div *ngIf = "step2.get('infoSource').value === 'Friend'">
                        <div class="form-group">
                            <label class="sr-only" for="form-userName">Sponsor UserName</label>
                            <input class="form-control" 
                                class="form-user-name form-control"
                                [ngClass]="setClass('sponsorUserName')" 
                                formControlName="sponsorUserName"
                                placeholder="Sponsor UserName..." 
                            >
                        </div>
                        <div class="form-group">
                            <label class="sr-only" for="form-userName">Sponsor FirstName</label>
                            <input class="form-control" 
                                class="form-user-name form-control"
                                [ngClass]="setClass('sponsorFirstName')" 
                                formControlName="sponsorFirstName"
                                placeholder="Sponsor FirstName..." 
                            >
                        </div>
                        <div class="form-group">
                            <label class="sr-only" for="form-userName">Sponsor LastName</label>
                            <input class="form-control" 
                                class="form-user-name form-control"
                                [ngClass]="setClass('sponsorLastName')" 
                                formControlName="sponsorLastName"
                                placeholder="Sponsor LastName..." 
                            >
                        </div>
                        <button type="button" class="btn btn-next" (click)="findSponsorWindowBtn()">Find Sponsor</button>
                        <popup (confirmClick)="findSponsorBtn()">
                            <form class="form-horizontal">
                                <label class="sr-only" for="form-userName">Sponsor UserName</label>
                                <input class="form-control" name = "sponsorUserName"
                                    placeholder="UserName..." 
                                    [(ngModel)] = 'sponsorUserName'
                                >
                                <img *ngIf = "loading" src = "../assets/img/load.gif" width = "45px"><br>
                                <span *ngIf = "errorSponser" class = 'user_alert'>Username not found!</span>
                                <div *ngIf = "showSponsor">
                                    <p>{{ sponsorFirstName }}  {{ sponsorLastName }}
                                    <button type="button" class="btn btn-next add-sponsor" (click)="addSponsor()">+</button>
                                </p>
                                </div>
                            </form>
                        </popup>
                    </div>
                </div>
            </div>
            <button type="button" class="btn btn-previous" (click)="prevBtn()">Previous</button>
            <button type="submit" class="btn btn-next" (click)="nextBtn()">Next</button>
        </div>
    </form>

    <!-- Third step -->
    <form *ngIf = 'currentStep == 3' class="registration-form" [formGroup]="step3"  novalidate>
        <div class="form-top">
            <div class="form-top-left">
                <h3>Step 3 / 3</h3>
                <p>Fill your credit card details:</p>
            </div>
            <div class="form-top-right">
                <i class="fa fa-credit-card-alt"></i>
            </div>
        </div>
        <div class="form-bottom">
            <div class="form-group" id = "card">
                <label class="sr-only" for="form-credit-card-number">Credit Card number</label>
                <input class="form-control form-credit-card-number form-control" 
                       [ngClass]="{'input-error': (!cardNumberValid) && step3.get('cardNumber').value != ''  }"
                       formControlName="cardNumber"
                       placeholder="Credit Card number..." 
                       [(mask)]="cardMask"
                       (keyup)="numberChange()"
                >
                <span class = "card-icon {{ cardType ? 'form-credit-card-number-' + cardType : ''}}" style = "width: 50px; height: 33.25px; display: inline-block;" ></span>
            </div>
            <div class="form-group">
                <label class="sr-only" for="form-credit-card-name">Credit Card name</label>
                <input class="form-control" 
                       class="form-credit-card-name form-control" 
                       [ngClass]="setClass('cardName')" 
                       formControlName="cardName"
                       placeholder="Credit Card name..." 
                       mask="SSSSSSSSSSSS"
                >
            </div>
            <div class="form-group">
                <label class="sr-only" for="form-credit-card-cvc">Credit Card cvc</label>
                <input class="form-control" 
                       class="form-credit-card-cvc form-control" 
                       [ngClass]="setClass('cardCvc')" 
                       formControlName="cardCvc"
                       placeholder="Credit Card cvc..."  
                >
            </div>
            <div class="form-group">
                <label class="sr-only" for="form-credit-card-expiration-date">Credit Card expiration date</label>
                <input class="form-control" name = "form_credit_card_expiration_date"
                       class="form-credit-card-expiration-date form-control"           
                       [ngClass]="{'input-error': !cardDateValid && step3.get('cardExpDate').touched }"
                       formControlName="cardExpDate"
                       placeholder="Credit Card expiration date..."
                       (ngModelChange)="dateChange($event)"
                       mask="00/00/0000"
                >
            </div>
            <button type="button" class="btn btn-previous" (click)="prevBtn()">Previous</button>
            <button type="submit" class="btn" (click)="nextBtn()">Next</button>
        </div>
    </form>

     <!-- Forth step -->
    <form >
        <div *ngIf = 'currentStep == 4'>
            <div class="form-top" >
                <div class="form-top-left">
                    <h3>All Your Information</h3>
                    <label>First Name:</label> {{ user.firstName }}<br>
                    <label>Last Name:</label> {{ user.lastName }}<br>
                    <label>Country:</label> {{ user.country }}<br>
                    <label>City: </label> {{ user.city }}<br>
                    <label>Address: </label> {{ user.address }}<br>
                    <label>Address2: </label> {{ user.address2 || empty }}<br>
                    <label>Postal Code: </label> {{ user.postalCode }}<br>
                    <label>Legal: </label> {{ user.legal }}<br>
                    <label *ngIf = 'isLegalCompany' >Company Name: </label>
                    <span *ngIf = 'isLegalCompany' >{{ user.companyName }}<br></span>
                    <hr>
                    <label>User Name: </label> {{ user.userName }}<br>
                    <label>Package: </label> {{ user.package }}<br>
                    <hr>
                    <label>Credit Card number: </label> {{ user.cardNumber | cardnumber}}<br>
                    <label>Credit Card Name: </label> {{ user.cardName }}<br>
                    <label>Credit Card Cvc: </label> {{ user.cardCvc }}<br>
                    <label>Credit Card expiration date: </label> {{ user.cardExpDate | mydate }}<br>
                    <hr>
                    <label>Shipping Country: </label> {{ user.shipCountry }}<br>
                    <label>Shipping City: </label> {{ user.shipCity }}<br>
                    <label>Shipping Address: </label> {{ user.shipAddress }}<br>
                    <label>Shipping Address2: </label> {{ user.shipAddress2 || empty }}<br>
                    <label>Shipping Postal Code: </label> {{ user.shipPostalCode }}<br>
                </div>
            </div>
            <div class="form-bottom">
                <button type="button" class="btn btn-previous" (click)="prevBtn()">Previous</button>
                <button type="button" class="btn" (click)="signUpBtn()">Sign up me!</button>
            </div>
        </div>
    </form>

     <!-- Alerting succesful registration -->
    <div *ngIf = "currentStep == 5">
            <div class="form-top">
                <div class="form-top-left">
                    <h3>Registration was successful!</h3>
                </div>
                <div class="form-top-right">
                    <i class="fa fa-check"></i>
                </div>
            </div>
          </div>
    
  </div>
</div>
